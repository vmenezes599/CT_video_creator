{"id":"27b651f5-cf16-4651-b730-069d1f6c91a9","revision":0,"last_node_id":24,"last_link_id":37,"nodes":[{"id":1,"type":"ADE_ContextExtras_ContextRef","pos":[1763.978271484375,810.6583862304688],"size":[270.3999938964844,162],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"prev_extras","name":"prev_extras","shape":7,"type":"CONTEXT_EXTRAS","link":null},{"localized_name":"strength_multival","name":"strength_multival","shape":7,"type":"MULTIVAL","link":null},{"localized_name":"contextref_mode","name":"contextref_mode","shape":7,"type":"CONTEXTREF_MODE","link":null},{"localized_name":"contextref_tune","name":"contextref_tune","shape":7,"type":"CONTEXTREF_TUNE","link":null},{"localized_name":"contextref_kf","name":"contextref_kf","shape":7,"type":"CONTEXTREF_KEYFRAME","link":null},{"localized_name":"start_percent","name":"start_percent","shape":7,"type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"end_percent","name":"end_percent","shape":7,"type":"FLOAT","widget":{"name":"end_percent"},"link":null}],"outputs":[{"localized_name":"CONTEXT_EXTRAS","name":"CONTEXT_EXTRAS","type":"CONTEXT_EXTRAS","slot_index":0,"links":[2]}],"properties":{"cnr_id":"comfyui-animatediff-evolved","ver":"1.5.5","Node name for S&R":"ADE_ContextExtras_ContextRef"},"widgets_values":[0,0.25],"color":"#432","bgcolor":"#653"},{"id":2,"type":"ADE_ContextExtras_Set","pos":[2093.978271484375,781.6583862304688],"size":[228.39999389648438,54],"flags":{"collapsed":false},"order":10,"mode":0,"inputs":[{"localized_name":"context_opts","name":"context_opts","type":"CONTEXT_OPTIONS","link":1},{"localized_name":"context_extras","name":"context_extras","shape":7,"type":"CONTEXT_EXTRAS","link":2}],"outputs":[{"localized_name":"CONTEXT_OPTS","name":"CONTEXT_OPTS","type":"CONTEXT_OPTIONS","slot_index":0,"links":[5]}],"properties":{"cnr_id":"comfyui-animatediff-evolved","ver":"1.5.5","Node name for S&R":"ADE_ContextExtras_Set"},"widgets_values":[],"color":"#432","bgcolor":"#653"},{"id":4,"type":"PrimitiveNode","pos":[2387.9345703125,1660.9942626953125],"size":[285.6000061035156,82],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","widget":{"name":"seed"},"slot_index":0,"links":[16]}],"title":"Primitive (I'm using this as seed)","properties":{"Run widget replace on values":false},"widgets_values":[640067045184049,"randomize"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":5,"type":"ADE_AnimateDiffSamplingSettings","pos":[2100.142822265625,986.3231811523438],"size":[236.8000030517578,274],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"noise_layers","name":"noise_layers","shape":7,"type":"NOISE_LAYERS","link":null},{"localized_name":"iteration_opts","name":"iteration_opts","shape":7,"type":"ITERATION_OPTS","link":null},{"localized_name":"seed_override","name":"seed_override","shape":7,"type":"INT","link":null},{"localized_name":"custom_cfg","name":"custom_cfg","shape":7,"type":"CUSTOM_CFG","link":null},{"localized_name":"sigma_schedule","name":"sigma_schedule","shape":7,"type":"SIGMA_SCHEDULE","link":null},{"localized_name":"image_inject","name":"image_inject","shape":7,"type":"IMAGE_INJECT","link":null},{"localized_name":"ancestral_opts","name":"ancestral_opts","shape":7,"type":"ANCESTRAL_OPTS","link":null},{"localized_name":"batch_offset","name":"batch_offset","type":"INT","widget":{"name":"batch_offset"},"link":null},{"localized_name":"noise_type","name":"noise_type","type":"COMBO","widget":{"name":"noise_type"},"link":null},{"localized_name":"seed_gen","name":"seed_gen","type":"COMBO","widget":{"name":"seed_gen"},"link":null},{"localized_name":"seed_offset","name":"seed_offset","type":"INT","widget":{"name":"seed_offset"},"link":null},{"localized_name":"adapt_denoise_steps","name":"adapt_denoise_steps","shape":7,"type":"BOOLEAN","widget":{"name":"adapt_denoise_steps"},"link":null}],"outputs":[{"localized_name":"settings","name":"settings","type":"SAMPLE_SETTINGS","slot_index":0,"links":[6]}],"properties":{"cnr_id":"comfyui-animatediff-evolved","ver":"1.5.5","Node name for S&R":"ADE_AnimateDiffSamplingSettings"},"widgets_values":[0,"FreeNoise","comfy",0,0],"color":"#432","bgcolor":"#653"},{"id":7,"type":"ADE_AnimateDiffLoaderGen1","pos":[2369.1220703125,814.0905151367188],"size":[315,242],"flags":{},"order":13,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":4},{"localized_name":"context_options","name":"context_options","shape":7,"type":"CONTEXT_OPTIONS","link":5},{"localized_name":"motion_lora","name":"motion_lora","shape":7,"type":"MOTION_LORA","link":null},{"localized_name":"ad_settings","name":"ad_settings","shape":7,"type":"AD_SETTINGS","link":null},{"localized_name":"ad_keyframes","name":"ad_keyframes","shape":7,"type":"AD_KEYFRAMES","link":null},{"localized_name":"sample_settings","name":"sample_settings","shape":7,"type":"SAMPLE_SETTINGS","link":6},{"localized_name":"scale_multival","name":"scale_multival","shape":7,"type":"MULTIVAL","link":null},{"localized_name":"effect_multival","name":"effect_multival","shape":7,"type":"MULTIVAL","link":null},{"localized_name":"per_block","name":"per_block","shape":7,"type":"PER_BLOCK","link":null},{"localized_name":"model_name","name":"model_name","type":"COMBO","widget":{"name":"model_name"},"link":null},{"localized_name":"beta_schedule","name":"beta_schedule","type":"COMBO","widget":{"name":"beta_schedule"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[12]}],"properties":{"cnr_id":"comfyui-animatediff-evolved","ver":"1.5.5","Node name for S&R":"ADE_AnimateDiffLoaderGen1"},"widgets_values":["animatediff-motion-adapter-v1-5-3.safetensors","autoselect"],"color":"#432","bgcolor":"#653"},{"id":9,"type":"VAEDecode","pos":[3273.58349609375,1076.2977294921875],"size":[210,46],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":8},{"localized_name":"vae","name":"vae","type":"VAE","link":36}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[10]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":10,"type":"ADE_StandardStaticContextOptions","pos":[1720.237548828125,532.5199584960938],"size":[319.20001220703125,198],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"prev_context","name":"prev_context","shape":7,"type":"CONTEXT_OPTIONS","link":null},{"localized_name":"view_opts","name":"view_opts","shape":7,"type":"VIEW_OPTS","link":null},{"localized_name":"context_length","name":"context_length","type":"INT","widget":{"name":"context_length"},"link":null},{"localized_name":"context_overlap","name":"context_overlap","type":"INT","widget":{"name":"context_overlap"},"link":null},{"localized_name":"fuse_method","name":"fuse_method","shape":7,"type":"COMBO","widget":{"name":"fuse_method"},"link":null},{"localized_name":"use_on_equal_length","name":"use_on_equal_length","shape":7,"type":"BOOLEAN","widget":{"name":"use_on_equal_length"},"link":null},{"localized_name":"start_percent","name":"start_percent","shape":7,"type":"FLOAT","widget":{"name":"start_percent"},"link":null},{"localized_name":"guarantee_steps","name":"guarantee_steps","shape":7,"type":"INT","widget":{"name":"guarantee_steps"},"link":null}],"outputs":[{"localized_name":"CONTEXT_OPTS","name":"CONTEXT_OPTS","type":"CONTEXT_OPTIONS","slot_index":0,"links":[1]}],"properties":{"cnr_id":"comfyui-animatediff-evolved","ver":"1.5.5","Node name for S&R":"ADE_StandardStaticContextOptions"},"widgets_values":[16,4,"pyramid",false,0,1],"color":"#432","bgcolor":"#653"},{"id":19,"type":"VAEEncode","pos":[133.12380981445312,285.2168884277344],"size":[210,46],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":null},{"localized_name":"vae","name":"vae","type":"VAE","link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"VAEEncode"},"widgets_values":[]},{"id":12,"type":"CLIPTextEncode","pos":[2324.778564453125,1335.4583740234375],"size":[377.7811279296875,124.52955627441406],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":11},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[13]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"CLIPTextEncode"},"widgets_values":["1girl, solo, cherry blossom, pink flower, white flower, spring season, wisteria, petals, flower, plum blossoms, outdoors, falling petals, black eyes, upper body, from side"],"color":"#232","bgcolor":"#353"},{"id":21,"type":"CLIPTextEncode","pos":[2316.90087890625,1504.7919921875],"size":[389.4939270019531,88],"flags":{},"order":15,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":25},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[24]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"CLIPTextEncode"},"widgets_values":["(deformed iris, deformed pupils, semi-realistic, cgi, 3d, render, sketch, cartoon, drawing, anime), text, cropped, out of frame, worst quality, low quality, jpeg artifacts, ugly, duplicate, morbid, mutilated, extra fingers, mutated hands, poorly drawn hands, poorly drawn face, mutation, deformed, blurry, dehydrated, bad anatomy, bad proportions, extra limbs, cloned face, disfigured, gross proportions, malformed limbs, missing arms, missing legs, extra arms, extra legs, fused fingers, too many fingers, long neck, UnrealisticDream"],"color":"#322","bgcolor":"#533"},{"id":8,"type":"CLIPSetLastLayer","pos":[1909.8704833984375,1400.0496826171875],"size":[315,58],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":7},{"localized_name":"stop_at_clip_layer","name":"stop_at_clip_layer","type":"INT","widget":{"name":"stop_at_clip_layer"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":0,"links":[11,25]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"CLIPSetLastLayer"},"widgets_values":[-2]},{"id":15,"type":"KSampler","pos":[2862.86669921875,1026.7911376953125],"size":[315,262],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":12},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":13},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":24},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":34},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":16},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[8]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"KSampler"},"widgets_values":[640067045184049,"fixed",20,8,"euler","normal",1]},{"id":14,"type":"CheckpointLoaderSimple","pos":[1493.5142822265625,1233.62646484375],"size":[315,98],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"ckpt_name","name":"ckpt_name","type":"COMBO","widget":{"name":"ckpt_name"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","slot_index":0,"links":[4]},{"localized_name":"CLIP","name":"CLIP","type":"CLIP","slot_index":1,"links":[7]},{"localized_name":"VAE","name":"VAE","type":"VAE","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["Realistic_Vision_V6.0_NV_B1.safetensors"]},{"id":3,"type":"EmptyLatentImage","pos":[2376.048095703125,1153.525390625],"size":[315,106],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,32]},{"id":11,"type":"VHS_VideoCombine","pos":[3552.390380859375,1074.9683837890625],"size":[315,547],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"LATENT","link":10},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":null},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":37},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"1.6.0","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":8,"loop_count":0,"filename_prefix":"test","format":"image/gif","pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"test_00002.gif","subfolder":"","type":"output","format":"image/gif","frame_rate":8,"workflow":"test_00002.png","fullpath":"C:\\Projects\\AI-Video-Creator\\lib\\ComfyUI\\output\\test_00002.gif"}}},"color":"#223","bgcolor":"#335"},{"id":18,"type":"LoadImage","pos":[1366.1373291015625,1555.1070556640625],"size":[315,314],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[29]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"LoadImage"},"widgets_values":["mayo_baby_scaled.png","image"]},{"id":20,"type":"VAEEncode","pos":[1820.27734375,1563.0623779296875],"size":[210,46],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":29},{"localized_name":"vae","name":"vae","type":"VAE","link":35}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[34]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"VAEEncode"},"widgets_values":[]},{"id":13,"type":"VAELoader","pos":[2934.19970703125,1358.2386474609375],"size":[385.8948669433594,58],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","slot_index":0,"links":[35,36,37]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.29","Node name for S&R":"VAELoader"},"widgets_values":["vae-ft-mse-840000-ema-pruned.safetensors"]},{"id":16,"type":"Note","pos":[1320.17822265625,810.8584594726562],"size":[392,351],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"properties":{"text":""},"widgets_values":["Most SD1.5 AnimateDiff models have a sweetspot of 16 frames, so the recommended minimum amount of latents to use is 16. The further lower it is than the sweetspot, the more artifacted the results will become.\n\nContext Options work on context_length latents at a time before 'sliding over' to work on the next group of latents with a context_overlap amount of overlapped frames. This lets you render more than the sweetspot amount of frames.\n\nNOTE: Having Context Options connected will not impact results unless the amount of latents exceeds context_length (unless use_on_equal_length is set to true, which would also activate them if context_length is equal to the latents length passed into a Sampler node).\n\nSample Settings allows for selecting other noise_types. When first placed, noise_type is default, but FreeNoise is recommended (and only takes effect) when Context Options are active, if the goal is to have a more 'consistent' output. Also see Context Extras that can be chained with Context Options.\n\nNOTE: When first placing the Sample Settings node, all default settings correspond to the same thing as if Sample Settings was not plugged in at all.\n\nhttps://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved"],"color":"#432","bgcolor":"#653"}],"links":[[1,10,0,2,0,"CONTEXT_OPTIONS"],[2,1,0,2,1,"CONTEXT_EXTRAS"],[4,14,0,7,0,"MODEL"],[5,2,0,7,1,"CONTEXT_OPTIONS"],[6,5,0,7,5,"SAMPLE_SETTINGS"],[7,14,1,8,0,"CLIP"],[8,15,0,9,0,"LATENT"],[10,9,0,11,0,"IMAGE"],[11,8,0,12,0,"CLIP"],[12,7,0,15,0,"MODEL"],[13,12,0,15,1,"CONDITIONING"],[16,4,0,15,4,"INT"],[24,21,0,15,2,"CONDITIONING"],[25,8,0,21,0,"CLIP"],[29,18,0,20,0,"IMAGE"],[34,20,0,15,3,"LATENT"],[35,13,0,20,1,"VAE"],[36,13,0,9,1,"VAE"],[37,13,0,11,3,"VAE"]],"groups":[{"id":1,"title":"Change this to match your model reqs","bounding":[1853.8424072265625,1318.0496826171875,416,165],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"Latents = Animation length","bounding":[2360.246337890625,1074.371337890625,350.8851623535156,206.727294921875],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.6209213230591555,"offset":[-1055.4088286249985,-408.5720383467911]},"frontendVersion":"1.16.9","reroutes":[{"id":1,"pos":[1817.5084228515625,1404.91650390625],"linkIds":[7]},{"id":2,"pos":[2818.013427734375,1663.75390625],"linkIds":[16]},{"id":3,"parentId":4,"pos":[2076.54052734375,926.0543823242188],"linkIds":[4,13]},{"id":4,"pos":[2039.7188720703125,1207.0535888671875],"linkIds":[4,13]},{"id":5,"parentId":2,"pos":[2824.33154296875,1181.472900390625],"linkIds":[16]}],"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true,"linkExtensions":[{"id":4,"parentId":3},{"id":7,"parentId":1},{"id":16,"parentId":5}]},"version":0.4}